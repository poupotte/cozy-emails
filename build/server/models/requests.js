// Generated by CoffeeScript 1.8.0
var americano;

americano = require('americano');

module.exports = {
  account: {
    all: americano.defaultRequests.all
  },
  mailbox: {
    all: americano.defaultRequests.all,
    treeMap: function(doc) {
      return emit([doc.accountID].concat(doc.tree), null);
    }
  },
  message: {
    all: americano.defaultRequests.all,
    byMailboxAndDate: {
      reduce: '_count',
      map: function(doc) {
        var boxid, uid, _ref, _results;
        _ref = doc.mailboxIDs;
        _results = [];
        for (boxid in _ref) {
          uid = _ref[boxid];
          emit([boxid, doc.date], uid);
          _results.push(void 0);
        }
        return _results;
      }
    },
    byMessageId: function(doc) {
      var messageId, _ref;
      if (messageId = (_ref = doc.headers) != null ? _ref["message-id"] : void 0) {
        return emit([doc.accountID, messageId], doc.conversationID);
      }
    },
    byNormSubject: function(doc) {
      if (doc.normSubject) {
        return emit(doc.normSubject, doc.threadId);
      }
    }
  }
};
